(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f88c336"],{"14c3":function(e,t,n){var a=n("c6b6"),r=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var i=n.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"358c":function(e,t,n){},5319:function(e,t,n){"use strict";var a=n("d784"),r=n("825a"),i=n("7b0b"),o=n("50c4"),c=n("a691"),s=n("1d80"),l=n("8aa5"),u=n("14c3"),d=Math.max,f=Math.min,v=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,n,a){var g=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,x=a.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(n,a){var r=s(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r,a):t.call(String(r),n,a)},function(e,a){if(!g&&x||"string"===typeof a&&-1===a.indexOf(b)){var i=n(t,e,this,a);if(i.done)return i.value}var s=r(e),v=String(this),m="function"===typeof a;m||(a=String(a));var p=s.global;if(p){var T=s.unicode;s.lastIndex=0}var E=[];while(1){var _=u(s,v);if(null===_)break;if(E.push(_),!p)break;var w=String(_[0]);""===w&&(s.lastIndex=l(v,o(s.lastIndex),T))}for(var C="",R=0,P=0;P<E.length;P++){_=E[P];for(var y=String(_[0]),I=d(f(c(_.index),v.length),0),S=[],k=1;k<_.length;k++)S.push(h(_[k]));var A=_.groups;if(m){var F=[y].concat(S,I,v);void 0!==A&&F.push(A);var W=String(a.apply(void 0,F))}else W=$(y,v,I,S,A,a);I>=R&&(C+=v.slice(R,I)+W,R=I+y.length)}return C+v.slice(R)}];function $(e,n,a,r,o,c){var s=a+e.length,l=r.length,u=p;return void 0!==o&&(o=i(o),u=m),t.call(c,u,(function(t,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,a);case"'":return n.slice(s);case"<":c=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return t;if(u>l){var d=v(u/10);return 0===d?t:d<=l?void 0===r[d-1]?i.charAt(1):r[d-1]+i.charAt(1):t}c=r[u-1]}return void 0===c?"":c}))}}))},6547:function(e,t,n){var a=n("a691"),r=n("1d80"),i=function(e){return function(t,n){var i,o,c=String(r(t)),s=a(n),l=c.length;return s<0||s>=l?e?"":void 0:(i=c.charCodeAt(s),i<55296||i>56319||s+1===l||(o=c.charCodeAt(s+1))<56320||o>57343?e?c.charAt(s):i:e?c.slice(s,s+2):o-56320+(i-55296<<10)+65536)}};e.exports={codeAt:i(!1),charAt:i(!0)}},"76c7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"pledge"},[a("div",{staticClass:"Thepledge"},[a("div",{staticClass:"Thepledge-i"},[a("div",{staticClass:"Thepledge-ii"},[a("div",[a("span",[e._v("我的质押中")]),a("span",[e._v(e._s(e.myPledge.toFixed(4)))])]),a("img",{attrs:{src:n("0fb3")}})]),a("div",{staticClass:"powers"},[a("div",[a("span",[e._v(e._s(e.Effect))]),a("span",[e._v("生效中")])]),a("img",{attrs:{src:n("05d5"),alt:""}}),a("div",[a("span",[e._v(e._s(e.effective))]),a("span",[e._v("待生效")])])])])]),a("div",{staticClass:"pledge-i"},[e._m(0),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],attrs:{type:"number",placeholder:"输入质押数量"},domProps:{value:e.amount},on:{input:function(t){t.target.composing||(e.amount=t.target.value)}}}),a("span",[e._v("GCT")]),a("img",{attrs:{src:n("05d5"),alt:""}}),a("span",{on:{click:e.balanceclick}},[e._v("最大")])]),a("div",[a("span",[e._v("余额："+e._s(e.balance.toFixed(4)))])]),a("button",{on:{click:e.validation}},[e._v("确定")])]),a("div",{staticClass:"Thepledgenumber"},[e._m(1),e._l(e.list,(function(t){return a("div",{key:t.time,staticClass:"alliancearri"},[a("span",[e._v(e._s(t.amount))]),a("span",{class:t.a},[e._v(e._s(t.activtionTime))]),a("span",[e._v(e._s(t.time))])])}))],2)])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",[e._v("质押")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",[e._v("质押数量")]),n("span",[e._v("状态")]),n("span",[e._v("时间")])])}],i=(n("99af"),n("4160"),n("caad"),n("0d03"),n("a9e3"),n("b680"),n("d3b7"),n("e25e"),n("ac1f"),n("25f0"),n("2532"),n("5319"),n("159b"),n("4795"),n("96cf"),n("1da1")),o=n("5530"),c={data:function(){return{checked:!1,showAuthorize:!1,authorizeType:"general",amount:null,allowance:0,histogram:null,ruleToggle:!1,isDisabled:!1,changeColor:"",value:1,list:[],effective:0,minLimit:1,Effect:0,activtionTimeColor:""}},created:function(){this.$contracts&&this.init()},computed:Object(o["a"])({},Vuex.mapState(["balance","myPledge"])),watch:{amount:function(e){e.toString().includes("-")&&(this.amount=Number(e.toString().replace(/\-/g,"")))}},methods:{balanceclick:function(){this.balance<100?vant.Toast.fail(this.$t("home.text57")):this.amount=100*parseInt(this.balance/100)},init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.myPledge-e.effective,e.Effect=n<0?0:n,e.$contracts.PledgeHolder.methods.holdMinLimit().call((function(t,n){t||(e.minLimit=n.fromWei())})),t.prev=3,e.$web3.eth.getBalance(e.$address).then((function(t){e.balance=t.fromWei().toFixed(),e.$store.commit("balance",e.balance),console.log(e.balance)})),t.next=7,e.$contracts.HaloConsensus.methods.nodeInfomationOf(e.$address).call({from:e.$address});case 7:return a=t.sent,t.next=10,e.$contracts.PledgeHolder.methods.totalHoldOf(e.$address).call({from:e.$address});case 10:e.effective=t.sent.fromWei(),e.$store.commit("myPledge",a.pledge.fromWei()),0!=a.pledge.fromWei()&&e.$contracts.HaloConsensus.methods.withdrawPledgeReward().call({from:e.$address},(function(t,n){t||(e.pledgePower=n.pledgeReward.fromWei().toFixed(4),e.linkPower=n.linkReward.fromWei().toFixed(4),e.income=n.pledgeReward.toBN().add(n.linkReward.toBN()).toString().fromWei().toFixed(4),e.$store.commit("pledgePower",e.pledgePower),e.$store.commit("income",e.income))})),t.next=17;break;case 15:t.prev=15,t.t0=t["catch"](3);case 17:e.$web3.eth.getBalance(e.$address).then((function(t){e.$store.commit("balance",t.fromWei())})),e.$contracts.HaloConsensus.methods.nodeInfomationOf(e.$address).call((function(t,n){t||(e.income=n.totalProfix.fromWei().toFixed(4))})),["质押奖励","选举奖励","链接奖励"],e.$contracts.PledgeHolder.methods.queryHoldInfoList(e.$address,0,20).call({from:e.$address},(function(t,n){t||n.holdTime.forEach((function(t,a){e.list.unshift({amount:n.holdAmount[a].fromWei().toFixed(4),activtionTime:"0"===n.activtionTime[a]?"待生效":"已生效",time:e.formatDate(t),a:"0"===n.activtionTime[a]?e.activtionTimeColor="aa":e.activtionTimeColor="activtionTimeColor"})}))}));case 21:case"end":return t.stop()}}),t,null,[[3,15]])})))()},onChange:function(e){this.amount=(e/100*this.balance).toFixed()},validation:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$isBind?["",0,"0",null].includes(e.amount)?vant.Toast.fail(e.$t("home.text36")):Number(e.balance)<Number(e.amount)?vant.Toast.fail(e.$t("home.text56")):Number(e.amount)%e.minLimit!=0?vant.Toast.fail(e.$t("home.text57")):(e.isDisabled=!0,e.changeColor="#dcdcdc",n=e.$contracts.PledgeHolder.methods.hold(),n.call({from:e.$address,value:e.amount.toWei()},(function(t,a){t||n.send({from:e.$address,value:e.amount.toWei()}).on("transactionHash",(function(t){t.error||vant.Toast.loading({message:e.$t("home.text6"),loadingType:"spinner",forbidClick:!0,duration:0})})).on("receipt",(function(t){vant.Toast.success(e.$t("app.text13")),e.amount=null,e.$emit("reload"),e.init(),vant.Toast.clear(),setTimeout((function(){e.isDisabled=!1}))})).on("error",(function(t){vant.Toast.clear(),vant.Toast.fail(e.$t("app.text19")),setTimeout((function(){e.isDisabled=!1,e.changeColor="linear-gradient(134deg, #89BBFD 0%, #0F8EFF 100%)"}),2e3)}))}))):e.$getIsBind(!0);case 1:case"end":return t.stop()}}),t)})))()},authorize:function(){"general"===this.authorizeType?this.amount.toWei():"4200000000".toWei();vant.Toast.loading({message:this.$t("home.text38"),loadingType:"spinner",forbidClick:!0,duration:0})},burn:function(){var e=this;console.log("---"),vant.Toast.loading({message:this.$t("home.text41"),loadingType:"spinner",forbidClick:!0,duration:0}),this.$contract.HaloConsensus.methods.doPledge.send({from:this.$address,value:this.amount.toWei()}).on("transactionHash",(function(t){vant.Toast.clear(),vant.Toast.success(e.$t("home.text42"))})).on("error",(function(t){vant.Toast.clear(),vant.Toast.fail(e.$t("home.text43"))}))},formatDate:function(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return"".concat(n,"/").concat(a,"/").concat(r)}}},s=c,l=(n("aa6b"),n("2877")),u=Object(l["a"])(s,a,r,!1,null,"5ea6cf36",null);t["default"]=u.exports},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},9263:function(e,t,n){"use strict";var a=n("ad6d"),r=n("9f7f"),i=RegExp.prototype.exec,o=String.prototype.replace,c=i,s=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=s||u||l;d&&(c=function(e){var t,n,r,c,d=this,f=l&&d.sticky,v=a.call(d),m=d.source,p=0,h=e;return f&&(v=v.replace("y",""),-1===v.indexOf("g")&&(v+="g"),h=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(m="(?: "+m+")",h=" "+h,p++),n=new RegExp("^(?:"+m+")",v)),u&&(n=new RegExp("^"+m+"$(?!\\s)",v)),s&&(t=d.lastIndex),r=i.call(f?n:d,h),f?r?(r.input=r.input.slice(p),r[0]=r[0].slice(p),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:s&&r&&(d.lastIndex=d.global?r.index+r[0].length:t),u&&r&&r.length>1&&o.call(r[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(r[c]=void 0)})),r}),e.exports=c},"9f7f":function(e,t,n){"use strict";var a=n("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},aa6b:function(e,t,n){"use strict";n("358c")},ac1f:function(e,t,n){"use strict";var a=n("23e7"),r=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},c20d:function(e,t,n){var a=n("da84"),r=n("58a8").trim,i=n("5899"),o=a.parseInt,c=/^[+-]?0[Xx]/,s=8!==o(i+"08")||22!==o(i+"0x16");e.exports=s?function(e,t){var n=r(String(e));return o(n,t>>>0||(c.test(n)?16:10))}:o},d784:function(e,t,n){"use strict";n("ac1f");var a=n("6eeb"),r=n("d039"),i=n("b622"),o=n("9263"),c=n("9112"),s=i("species"),l=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),v=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var m=i(e),p=!r((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),h=p&&!r((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[s]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!p||!h||"replace"===e&&(!l||!u||f)||"split"===e&&!v){var g=/./[m],x=n(m,""[e],(function(e,t,n,a,r){return t.exec===o?p&&!r?{done:!0,value:g.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=x[0],$=x[1];a(String.prototype,e,b),a(RegExp.prototype,m,2==t?function(e,t){return $.call(e,this,t)}:function(e){return $.call(e,this)})}d&&c(RegExp.prototype[m],"sham",!0)}},e25e:function(e,t,n){var a=n("23e7"),r=n("c20d");a({global:!0,forced:parseInt!=r},{parseInt:r})}}]);